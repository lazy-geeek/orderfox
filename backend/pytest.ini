[pytest]
# Fix pytest-asyncio deprecation warning
asyncio_default_fixture_loop_scope = function

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Optimized output for result logging (can be overridden by command line)
addopts = -v --tb=short

# Markers for chunked test execution (following logical dependency order)
markers =
    # Legacy markers
    integration: marks tests as integration tests (may require network/external services)
    slow: marks tests as slow running
    unit: marks tests as unit tests (default)
    
    # Chunked execution markers (logical dependency order)
    chunk1: Foundation tests - Database, config, utilities (~30s)
    chunk2: Core services - Symbol, exchange, formatting, caching (~45s)
    chunk3: Business services - Bot, orderbook, chart data (~60s)
    chunk4: Advanced services - Liquidation, trade, trading engine (~60s)
    chunk5: REST API endpoints - Schema, bot, market data APIs (~45s)
    chunk6: WebSocket API endpoints - Connection manager, market data, liquidations WS (~75s)
    chunk7a: Bot Integration tests - Bot paper trading flows (~45s)
    chunk7b: Data Flow Integration tests - E2E formatting, liquidation volume flows (~60s)
    chunk7c: WebSocket Integration tests - Real WebSocket orderbook tests (~90s)
    chunk8: Performance and load tests - Volume, load, advanced integration (~90s)